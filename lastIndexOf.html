<script src="../simpletest.js"></script>
<script>

/*
Prototype Function
 function lastIndexOf(originalArray, searchValue, optionalStartingPostion) {
    var startingPosition = originalArray.length - 1;
    if(arguments = 3) startingPosition = optionalStartingPostion; 
    for(var i = startingPosition; i > 0; i--) {
         if(originalArray[i] === searchValue)) {
             return i;
         }
     }
   return -1;
 }
*/
   
function lastIndexOf(originalArray, searchValue, optionalStartingPostion) {
    var startingPosition = originalArray.length - 1;
    if(arguments.length === 3) {
        if(optionalStartingPostion < 0) {
          optionalStartingPostion = startingPosition + optionalStartingPostion;
        }
        startingPosition = optionalStartingPostion; 
    }
    for(var i = startingPosition; i >= 0; i--) {
         if(originalArray[i] === searchValue) {
             return i;
         }
     }
   return -1;
 };



tests({

  'It should return the last element in the array (first argument) that the matches the search value (second argument)': function() {
    var result = lastIndexOf([1,3,2,3],3);
    eq(result,3);
  },

  'It should return -1 if no element in array matches the search value': function() {
    var result = lastIndexOf([1,2,3],4);
    eq(result,-1);
  },

  'It should accept an optional starting position as third argument': function () {
    var result = lastIndexOf([1,2,3,1],1,1);
    eq(result,0);
  },

  'If starting position is greater than the size of the array, the whole array will be searched': function () {
    var result = lastIndexOf([1,2,3],1,3);
    eq(result,0);    
  },

  'If starting postion is negative, it is treated as an offset from the end of the array, e.g. -1 = last element in the array' : function () {
    var result = lastIndexOf([1,2,1],1,-1);
    eq(result,0);  
  },

  'If the calculated starting position is < 0, it should return -1 and not search the array' : function () {
    var result = lastIndexOf([1,2,3],1,-3);
    eq(result,-1);
  }

});
</script>
